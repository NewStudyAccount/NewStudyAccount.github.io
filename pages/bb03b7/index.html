<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis | Blog</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="学习文档">
    <meta name="keywords" content="个人技术博客">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.cfb18a3c.css" as="style"><link rel="preload" href="/assets/js/app.87eabd22.js" as="script"><link rel="preload" href="/assets/js/2.3f274d60.js" as="script"><link rel="preload" href="/assets/js/33.07d8ec2a.js" as="script"><link rel="prefetch" href="/assets/js/10.eb41a99f.js"><link rel="prefetch" href="/assets/js/11.77368eff.js"><link rel="prefetch" href="/assets/js/12.c4413aa8.js"><link rel="prefetch" href="/assets/js/13.818ece60.js"><link rel="prefetch" href="/assets/js/14.088e3093.js"><link rel="prefetch" href="/assets/js/15.c213ea39.js"><link rel="prefetch" href="/assets/js/16.3c3e9f27.js"><link rel="prefetch" href="/assets/js/17.d3ccc168.js"><link rel="prefetch" href="/assets/js/18.076de409.js"><link rel="prefetch" href="/assets/js/19.c2b90abd.js"><link rel="prefetch" href="/assets/js/20.ac1bd3a9.js"><link rel="prefetch" href="/assets/js/21.9424afad.js"><link rel="prefetch" href="/assets/js/22.429507f5.js"><link rel="prefetch" href="/assets/js/23.656e2cdf.js"><link rel="prefetch" href="/assets/js/24.0f0b320d.js"><link rel="prefetch" href="/assets/js/25.07ef8288.js"><link rel="prefetch" href="/assets/js/26.b16e010f.js"><link rel="prefetch" href="/assets/js/27.45670c97.js"><link rel="prefetch" href="/assets/js/28.81f582d5.js"><link rel="prefetch" href="/assets/js/29.33ef3f79.js"><link rel="prefetch" href="/assets/js/3.ef8a815b.js"><link rel="prefetch" href="/assets/js/30.f12a6485.js"><link rel="prefetch" href="/assets/js/31.f105868b.js"><link rel="prefetch" href="/assets/js/32.0ef564c1.js"><link rel="prefetch" href="/assets/js/34.882e4e22.js"><link rel="prefetch" href="/assets/js/35.c832b83f.js"><link rel="prefetch" href="/assets/js/36.0dbf6a03.js"><link rel="prefetch" href="/assets/js/37.fd99a32f.js"><link rel="prefetch" href="/assets/js/38.184c845f.js"><link rel="prefetch" href="/assets/js/39.81758d0e.js"><link rel="prefetch" href="/assets/js/4.d3d1e88c.js"><link rel="prefetch" href="/assets/js/40.1e3bd4dd.js"><link rel="prefetch" href="/assets/js/41.ab55b8a0.js"><link rel="prefetch" href="/assets/js/42.1f093db2.js"><link rel="prefetch" href="/assets/js/43.446ab6d2.js"><link rel="prefetch" href="/assets/js/44.e52d54e8.js"><link rel="prefetch" href="/assets/js/45.75499d54.js"><link rel="prefetch" href="/assets/js/46.427df341.js"><link rel="prefetch" href="/assets/js/47.6d75abc4.js"><link rel="prefetch" href="/assets/js/48.243db9bf.js"><link rel="prefetch" href="/assets/js/49.05a742ec.js"><link rel="prefetch" href="/assets/js/5.b300920d.js"><link rel="prefetch" href="/assets/js/50.ea23c038.js"><link rel="prefetch" href="/assets/js/51.354723b3.js"><link rel="prefetch" href="/assets/js/52.ede87da4.js"><link rel="prefetch" href="/assets/js/53.8ac13bc8.js"><link rel="prefetch" href="/assets/js/54.1ad946fd.js"><link rel="prefetch" href="/assets/js/55.968cbe29.js"><link rel="prefetch" href="/assets/js/56.621ebc28.js"><link rel="prefetch" href="/assets/js/57.cde308fa.js"><link rel="prefetch" href="/assets/js/58.ccdebd28.js"><link rel="prefetch" href="/assets/js/59.b795d1eb.js"><link rel="prefetch" href="/assets/js/6.97cc3fc3.js"><link rel="prefetch" href="/assets/js/60.501f0ca8.js"><link rel="prefetch" href="/assets/js/61.f62bf13b.js"><link rel="prefetch" href="/assets/js/62.c1fdb062.js"><link rel="prefetch" href="/assets/js/63.fe3a8610.js"><link rel="prefetch" href="/assets/js/64.4fa7e0e3.js"><link rel="prefetch" href="/assets/js/65.892c344b.js"><link rel="prefetch" href="/assets/js/66.b3527819.js"><link rel="prefetch" href="/assets/js/67.9df18578.js"><link rel="prefetch" href="/assets/js/68.32144aed.js"><link rel="prefetch" href="/assets/js/69.75a86074.js"><link rel="prefetch" href="/assets/js/7.eb6b49bc.js"><link rel="prefetch" href="/assets/js/70.4059a4d6.js"><link rel="prefetch" href="/assets/js/71.cc4a13cf.js"><link rel="prefetch" href="/assets/js/72.02759e45.js"><link rel="prefetch" href="/assets/js/73.59c2a228.js"><link rel="prefetch" href="/assets/js/74.88727dbb.js"><link rel="prefetch" href="/assets/js/75.4ddb830d.js"><link rel="prefetch" href="/assets/js/76.5e811159.js"><link rel="prefetch" href="/assets/js/77.7e3f8eee.js"><link rel="prefetch" href="/assets/js/78.ccdaceb5.js"><link rel="prefetch" href="/assets/js/79.f2091ce2.js"><link rel="prefetch" href="/assets/js/8.99785c7f.js"><link rel="prefetch" href="/assets/js/80.0ede5d5b.js"><link rel="prefetch" href="/assets/js/81.238d5d81.js"><link rel="prefetch" href="/assets/js/82.d84c389d.js"><link rel="prefetch" href="/assets/js/83.6a11da71.js"><link rel="prefetch" href="/assets/js/84.c4fd3186.js"><link rel="prefetch" href="/assets/js/85.59cee480.js"><link rel="prefetch" href="/assets/js/86.43e351f2.js"><link rel="prefetch" href="/assets/js/87.2a02418c.js"><link rel="prefetch" href="/assets/js/88.35fb4e70.js"><link rel="prefetch" href="/assets/js/89.8791d4d9.js"><link rel="prefetch" href="/assets/js/9.4f9148c2.js"><link rel="prefetch" href="/assets/js/90.b0df9752.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cfb18a3c.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Blog" class="logo"> <span class="site-name can-hide">Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人学习笔记" class="dropdown-title"><a href="/pages/a31ae1/" class="link-title">个人学习笔记</a> <span class="title" style="display:none;">个人学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Docker</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/ba54ad/" class="nav-link">Docker</a></li></ul></li><li class="dropdown-item"><h4>Redis</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/bb03b7/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Redis</a></li><li class="dropdown-subitem"><a href="/pages/1aa945/" class="nav-link">Redis-Docker</a></li></ul></li><li class="dropdown-item"><h4>Mq</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/1ef249/" class="nav-link">RocketMq</a></li><li class="dropdown-subitem"><a href="/pages/633ffb/" class="nav-link">RabbitMq</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/pages/0ff885/" class="nav-link">技术笔记</a></div><div class="nav-item"><a href="/pages/aefe68/" class="nav-link">问题总结</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div> <a href="https://github.com/#" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="#"> <div class="blogger-info"><h3>船到桥头沉</h3> <span>==========</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》</a></li><li class="dropdown-subitem"><a href="/note/git/" class="nav-link">《Git》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人学习笔记" class="dropdown-title"><a href="/pages/a31ae1/" class="link-title">个人学习笔记</a> <span class="title" style="display:none;">个人学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Docker</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/ba54ad/" class="nav-link">Docker</a></li></ul></li><li class="dropdown-item"><h4>Redis</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/bb03b7/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Redis</a></li><li class="dropdown-subitem"><a href="/pages/1aa945/" class="nav-link">Redis-Docker</a></li></ul></li><li class="dropdown-item"><h4>Mq</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/1ef249/" class="nav-link">RocketMq</a></li><li class="dropdown-subitem"><a href="/pages/633ffb/" class="nav-link">RabbitMq</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/pages/0ff885/" class="nav-link">技术笔记</a></div><div class="nav-item"><a href="/pages/aefe68/" class="nav-link">问题总结</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div> <a href="https://github.com/#" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Redis</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/bb03b7/" aria-current="page" class="active sidebar-link">Redis</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/bb03b7/#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header level2"><a href="/pages/bb03b7/#redis-key" class="sidebar-link">Redis-key</a></li><li class="sidebar-sub-header level2"><a href="/pages/bb03b7/#string" class="sidebar-link">String</a></li><li class="sidebar-sub-header level2"><a href="/pages/bb03b7/#list" class="sidebar-link">List</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#从左插入" class="sidebar-link">从左插入</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#从右插入" class="sidebar-link">从右插入</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#元素前后插入值" class="sidebar-link">元素前后插入值</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#指定下标赋值" class="sidebar-link">指定下标赋值</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#取值" class="sidebar-link">取值</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#查看列表" class="sidebar-link">查看列表</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#下标获取元素" class="sidebar-link">下标获取元素</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#列表长度" class="sidebar-link">列表长度</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#列表是否存在" class="sidebar-link">列表是否存在</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#删除" class="sidebar-link">删除</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#从左移除" class="sidebar-link">从左移除</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#从右移除" class="sidebar-link">从右移除</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#移除元素" class="sidebar-link">移除元素</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#截取" class="sidebar-link">截取</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#截取下标范围的元素" class="sidebar-link">截取下标范围的元素</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#移动" class="sidebar-link">移动</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#移除列表最后一个元素并移动到新列表中" class="sidebar-link">移除列表最后一个元素并移动到新列表中</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/bb03b7/#set" class="sidebar-link">Set</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#赋值" class="sidebar-link">赋值</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#插入值" class="sidebar-link">插入值</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#取值-2" class="sidebar-link">取值</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#所有元素" class="sidebar-link">所有元素</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#元素是否存在" class="sidebar-link">元素是否存在</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#元素个数" class="sidebar-link">元素个数</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#取随机元素" class="sidebar-link">取随机元素</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#两个集合的差集" class="sidebar-link">两个集合的差集</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#两个集合的交集" class="sidebar-link">两个集合的交集</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#两个集合的并集" class="sidebar-link">两个集合的并集</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#删除-2" class="sidebar-link">删除</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#指定元素" class="sidebar-link">指定元素</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#随机元素" class="sidebar-link">随机元素</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#移动-2" class="sidebar-link">移动</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#指定元素到其他集合" class="sidebar-link">指定元素到其他集合</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/bb03b7/#hash" class="sidebar-link">Hash</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#赋值-2" class="sidebar-link">赋值</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#单个哈希" class="sidebar-link">单个哈希</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#多个哈希" class="sidebar-link">多个哈希</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#不存在才赋值" class="sidebar-link">不存在才赋值</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#自增" class="sidebar-link">自增</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#取值-3" class="sidebar-link">取值</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#单个哈希-2" class="sidebar-link">单个哈希</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#多个哈希-2" class="sidebar-link">多个哈希</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#所有值" class="sidebar-link">所有值</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#所有-key" class="sidebar-link">所有 key</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#所有-value" class="sidebar-link">所有 value</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#长度" class="sidebar-link">长度</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#字段是否存在" class="sidebar-link">字段是否存在</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#删除-3" class="sidebar-link">删除</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#指定字段" class="sidebar-link">指定字段</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/bb03b7/#zset" class="sidebar-link">Zset</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#赋值-3" class="sidebar-link">赋值</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#一个或多个元素" class="sidebar-link">一个或多个元素</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#取值-4" class="sidebar-link">取值</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#正序查询指定下标范围" class="sidebar-link">正序查询指定下标范围</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#倒序查询指定下标范围" class="sidebar-link">倒序查询指定下标范围</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#元素个数-2" class="sidebar-link">元素个数</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#指定区间元素数量" class="sidebar-link">指定区间元素数量</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#排序" class="sidebar-link">排序</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#正序" class="sidebar-link">正序</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#倒序" class="sidebar-link">倒序</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#删除-4" class="sidebar-link">删除</a></li><li class="sidebar-sub-header level3"><a href="/pages/bb03b7/#指定元素-2" class="sidebar-link">指定元素</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/bb03b7/#常用string" class="sidebar-link">常用String</a></li><li class="sidebar-sub-header level2"><a href="/pages/bb03b7/#常用hash" class="sidebar-link">常用Hash</a></li><li class="sidebar-sub-header level2"><a href="/pages/bb03b7/#常用list" class="sidebar-link">常用List</a></li><li class="sidebar-sub-header level2"><a href="/pages/bb03b7/#常用set" class="sidebar-link">常用Set</a></li><li class="sidebar-sub-header level2"><a href="/pages/bb03b7/#常用key的操作" class="sidebar-link">常用Key的操作</a></li><li class="sidebar-sub-header level2"><a href="/pages/bb03b7/#对zset的操作-重要-热搜" class="sidebar-link">对ZSet的操作-重要（热搜）</a></li><li class="sidebar-sub-header level2"><a href="/pages/bb03b7/#对位图bitmaps的操作" class="sidebar-link">对位图BitMaps的操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level4"><a href="/pages/bb03b7/#_7-1-设置值" class="sidebar-link">[#](https://www.ydlclass.com/doc21xnv/frame/redis/#_7-1-设置值)7.1 设置值</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb03b7/#_7-2-获取值" class="sidebar-link">[#](https://www.ydlclass.com/doc21xnv/frame/redis/#_7-2-获取值)7.2 获取值</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb03b7/#_7-3-获取bitmaps指定范围值为1的个数" class="sidebar-link">[#](https://www.ydlclass.com/doc21xnv/frame/redis/#_7-3-获取bitmaps指定范围值为1的个数)7.3 获取Bitmaps指定范围值为1的个数</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb03b7/#_7-4-bitmaps间的运算" class="sidebar-link">[#](https://www.ydlclass.com/doc21xnv/frame/redis/#_7-4-bitmaps间的运算)7.4 Bitmaps间的运算</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/bb03b7/#_8、对hyperloglog结构的操作" class="sidebar-link">[#](https://www.ydlclass.com/doc21xnv/frame/redis/#_8、对hyperloglog结构的操作)8、对HyperLogLog结构的操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level4"><a href="/pages/bb03b7/#_8-1-应用场景" class="sidebar-link">[#](https://www.ydlclass.com/doc21xnv/frame/redis/#_8-1-应用场景)8.1 应用场景</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb03b7/#_8-2-uv计算示例" class="sidebar-link">[#](https://www.ydlclass.com/doc21xnv/frame/redis/#_8-2-uv计算示例)8.2 UV计算示例</a></li><li class="sidebar-sub-header level4"><a href="/pages/bb03b7/#_8-3-hyperloglog为什么适合做大量数据的统计" class="sidebar-link">[#](https://www.ydlclass.com/doc21xnv/frame/redis/#_8-3-hyperloglog为什么适合做大量数据的统计)8.3 HyperLogLog为什么适合做大量数据的统计</a></li></ul></li></ul></li><li><a href="/pages/1aa945/" class="sidebar-link">Redis-Docker</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>RocketMq</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>RabbitMq</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ElasticSerach</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/pages/a31ae1/#个人学习笔记" data-v-06225672>个人学习笔记</a></li><li data-v-06225672><a href="/pages/a31ae1/#Redis" data-v-06225672>Redis</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="javascript:;" data-v-06225672>船到桥头沉</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-02-27</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Redis<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="安装redis"><a href="#安装redis" class="header-anchor">#</a> 安装Redis</h1> <blockquote><p>删除已经有的redis</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-f</span> /usr/bin/redis*
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>创建目录</p> <p>mkdir xxxxx</p> <p>进入目录  	下载源文件压缩包</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span>  /export/software  
<span class="token function">wget</span>  http://download.redis.io/releases/redis-6.2.6.tar.gz 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>解压</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /export/software  
<span class="token function">tar</span> xzf redis-6.2.6.tar.gz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>安装C运行环境</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">apt</span> <span class="token function">install</span> gcc-c++  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>安装tcl</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">apt</span> <span class="token function">install</span> tcl
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其它环境依据 提示安装</p> <p>进入源码文件夹</p> <p>编译源码并安装 包括具体安装位置</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /export/server/redis-6.2.6/  
<span class="token function">make</span> <span class="token builtin class-name">test</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span> <span class="token assign-left variable">PREFIX</span><span class="token operator">=</span>/export/server/redis-6.2.6  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>修改配置文件</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span>  redis.conf  
<span class="token comment">#  修改第61行  </span>
<span class="token builtin class-name">bind</span>  localhost  
<span class="token comment">#  修改第128行  后台 </span>
daemonize  <span class="token function">yes</span>  
<span class="token comment">#  修改第163行  </span>
logfile  <span class="token string">&quot;/export/server/redis-6.2.6/log/redis.log&quot;</span>  
<span class="token comment">#  修改第247行  </span>
<span class="token function">dir</span>  /export/server/redis-6.2.6/data  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>复制、移动文件</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>cp<span class="token punctuation">(</span>移动mv<span class="token punctuation">)</span> /xx/文件夹路径/文件名 <span class="token punctuation">[</span>新路径<span class="token punctuation">]</span><span class="token punctuation">(</span>当前路径 ./ <span class="token punctuation">)</span>

cp<span class="token punctuation">(</span>移动mv<span class="token punctuation">)</span> /xx/文件夹路径/*<span class="token punctuation">(</span>该文件夹下的所有文件<span class="token punctuation">)</span> <span class="token punctuation">[</span>新路径<span class="token punctuation">]</span><span class="token punctuation">(</span>当前路径 ./ <span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> 192.168.245.131
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
    <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 1000ms
    
    <span class="token key atrule">jedis</span><span class="token punctuation">:</span>
      <span class="token key atrule">pool</span><span class="token punctuation">:</span>
        <span class="token key atrule">max-active</span><span class="token punctuation">:</span> <span class="token number">8</span>
        <span class="token key atrule">max-idle</span><span class="token punctuation">:</span> <span class="token number">8</span>
        <span class="token key atrule">max-wait</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>1ms
        <span class="token key atrule">min-idle</span><span class="token punctuation">:</span> <span class="token number">0</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>启动</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /export/server/redis-6.2.6/  
./bin/redis-server ./bin/redis-server/redis.conf  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>关闭</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>./bin/redis-cli  <span class="token parameter variable">-h</span> localhost <span class="token function">shutdown</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h1 id="删除文件"><a href="#删除文件" class="header-anchor">#</a> 删除文件</h1> <ol><li>删除文件夹的内容包括文件夹：</li></ol> <p>rm -rf 文件夹的名字    （-r 是 循环的意思， f是不询问的意思）</p> <p>2 .删除文件夹的内容不包括文件夹：</p> <p>rm -rf 文件夹的名字/*   (后面加上/*表示删除内容不删除文件夹)</p> <h1 id="修改系统时区"><a href="#修改系统时区" class="header-anchor">#</a> 修改系统时区</h1> <p>查看系统时区</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">date</span> <span class="token parameter variable">-R</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>设置时区</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>tzselect
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h1 id="关闭redis保护模式"><a href="#关闭redis保护模式" class="header-anchor">#</a> 关闭redis保护模式</h1> <p>redis在启动的时候默认会启动一个保护模式，只有同一个服务器可以连接上redis。别的服务器连接不上这个redis
解决办法：关闭保护模式</p> <p>1、进入redis安装目录找到conf目录下的redis.conf（/etc/redis/redis.conf）文件
vi redis.conf 注释bind 127.0.0.1这一行</p> <p>2、启动redis 登入客户端  执行下面命令
config set protected-mode &quot;no&quot;</p> <h1 id="redis"><a href="#redis" class="header-anchor">#</a> Redis</h1> <blockquote><p>redis是一种数据库。采用K-V模型存储数据</p></blockquote> <p>redis是一种数据库。采用K-V模型存储数据</p> <p>Remote Dictionary Server远程字典服务器，高性能的NoSQL数据库，<strong>基于内存</strong></p> <p>Redis中的数据大部分时间都是存储在内存中。适合存储频繁访问、数据量比较小的数据。</p> <h1 id="nosql概述"><a href="#nosql概述" class="header-anchor">#</a> NoSQL概述</h1> <blockquote><p>1、单机MySql</p></blockquote> <p><img src="C:%5CUsers%5Cqjj%5CDesktop%5C%E5%AD%A6%E4%B9%A0%5CRedis.assets%5Cimage-20220507142737432.png" alt="image-20220507142737432"></p> <blockquote><p>2、Memcached(缓存) +MySQL + 垂直拆分(读写分离)</p></blockquote> <p>网站80%的情况都是在读，减轻数据库的压力，使用缓存来保证效率。</p> <p>发展过程：优化数据结构和索引------&gt;文件缓存(IO)----&gt;Memcached</p> <p><img src="C:%5CUsers%5Cqjj%5CDesktop%5C%E5%AD%A6%E4%B9%A0%5CRedis.assets%5Cimage-20220507140646116.png" alt="image-20220507140646116"></p> <blockquote><p>3、分库分表+水平拆分+MySQL集群</p></blockquote> <p>技术和业务下发展的同时，对人的要求也越来越高！</p> <p>本质：数据库(读、写)</p> <p>早些年MyISAM：表锁，十分影响效率！高并发下就会出现严重的锁问题</p> <p>转战Innodb:行锁</p> <p><img src="C:%5CUsers%5Cqjj%5CDesktop%5C%E5%AD%A6%E4%B9%A0%5CRedis.assets%5Cimage-20220507142639140.png" alt="image-20220507142639140"></p> <blockquote><p>4、如今</p></blockquote> <p>MySQL等关系型数据库就不够用了！数据量很多，变化很快！</p> <p>MySQL有的使用存储大量的数据 （博客、图片） 数据库表很大，效率就低了</p> <blockquote><p>目前一个基本的互联网项目！</p></blockquote> <p><img src="C:%5CUsers%5Cqjj%5CDesktop%5C%E5%AD%A6%E4%B9%A0%5CRedis.assets%5Cimage-20220507144120927.png" alt="image-20220507144120927"></p> <blockquote><p>为什么要用NoSQL！</p></blockquote> <p>用户的个人信息，社交网络，地理位置。用户自己产生的数据，用户日志信息的爆发增长</p> <h1 id="什么是nosql"><a href="#什么是nosql" class="header-anchor">#</a> 什么是NoSQL</h1> <blockquote><p>NoSQL</p></blockquote> <p>NoSQL = Not Only SQL</p> <p>关系型数据库：表格，行，列</p> <p>泛指非关系型数据库，随着web2.0互联网的诞生，尤其是超大规模的高并发的社区。</p> <p>NoSQL在当今大数据环境下发展迅速，Redis是发展最快的，而且是我们当下必须要掌握的一个技术！</p> <p>很多的数据类型 用户的个人信息，社交网络，地理位置。这些数据类型的存储不需要一个固定的格式！不需要多余的操作就可以横向扩展<code>Map&lt;String,Object&gt;</code>使用键值队来控制</p> <blockquote><p>NoSQL特点</p></blockquote> <p>解耦</p> <p>1、方便扩展（数据之间没有关系，很好扩展）</p> <p>2、大数量高性能(Redis 一秒可以写8万次，读11万次 ，NoSQL的缓存记录级，是一种细粒度的缓存，性能会比较高。)</p> <p>3、数据类型是多样的！(不需要事先设计数据库！随取随用！)</p> <p>4、传动RDBMS和NoSQL</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>传统的RDBMS
- 结构化组织
- SQL
- 数据和关系都存在单独的表中 row col
- 操作，数据定义语言
- 严格的一致性
- ......
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>NoSQL
- 不仅仅是数据库
- 没有固定的查询语句
- 键值对存储，列存储，文档存储，图形数据库
- 最终一致性
- CAP定理和 BASE（异地多活）
- 高性能，高可用、高可扩展性
- ..........
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>了解：3V+3高</p></blockquote> <p>大数据时代的3V ：主要描述问题</p> <ol><li>海量（Volume）</li> <li>多样（Variety）</li> <li>实时（Velocity）</li></ol> <p>大数据时代的3高 ：主要对程序的要求</p> <ol><li>高并发</li> <li>高可扩</li> <li>高性能</li></ol> <p>真正的时间：NoSQL+RDBMS 一起使用才是最强的</p> <h1 id="nosql的四大分类"><a href="#nosql的四大分类" class="header-anchor">#</a> NoSQL的四大分类</h1> <h3 id="kv键值对"><a href="#kv键值对" class="header-anchor">#</a> KV键值对：</h3> <p>新浪：Redis</p> <p>美团：Redis+Tair</p> <p>阿里、百度：Redis+memecache</p> <h3 id="文档型数据库-bson格式和json一样"><a href="#文档型数据库-bson格式和json一样" class="header-anchor">#</a> 文档型数据库(bson格式和Json一样)</h3> <ul><li><p>MongoDB</p> <ul><li>MongoDB是一个基于分布式文件存储的数据库，主要用来处理大量的文档！</li> <li>MongoDB是一个介于关系型和非关系型数据库之间的中间产品！MongoDB是非关系型数据库中功能最丰富，最像关系型数据库的。</li></ul></li> <li><p>ConthDB</p></li></ul> <h3 id="列表存储数据库"><a href="#列表存储数据库" class="header-anchor">#</a> 列表存储数据库</h3> <ul><li>HBase</li> <li>分布式文件系统</li></ul> <h3 id="图关系数据库"><a href="#图关系数据库" class="header-anchor">#</a> 图关系数据库</h3> <p><img src="C:%5CUsers%5Cqjj%5CDesktop%5C%E5%AD%A6%E4%B9%A0%5CRedis.assets%5Cimage-20220507161703840.png" alt="image-20220507161703840"></p> <ul><li>不是存图形，存放的是关系，比如：朋友圈社交网络</li> <li>Neo4j，InfoGrid</li></ul> <blockquote><p>四者对比</p></blockquote> <p><img src="C:%5CUsers%5Cqjj%5CDesktop%5C%E5%AD%A6%E4%B9%A0%5CRedis.assets%5Cimage-20220507161922800.png" alt="image-20220507161922800"></p> <h1 id="redis入门"><a href="#redis入门" class="header-anchor">#</a> Redis入门</h1> <h2 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h2> <blockquote><p>redis是一种数据库。采用K-V模型存储数据</p></blockquote> <p>redis是一种数据库。采用K-V模型存储数据</p> <p>Remote Dictionary Server远程字典服务器，高性能的NoSQL数据库，<strong>基于内存</strong></p> <p>Redis中的数据大部分时间都是存储在内存中。适合存储频繁访问、数据量比较小的数据。</p> <blockquote><p>Redis能做什么？</p></blockquote> <p>1、内存存储、持久化 (rdb、aof)</p> <p>2、效率高，可用于高速缓存</p> <p>3、发布订阅系统</p> <p>4、地图信息分析</p> <p>5、计时器、计数器</p> <p>6、........</p> <blockquote><p>特性</p></blockquote> <p>1、多样的数据类型</p> <p>2、持久化</p> <p>3、集群</p> <p>4、事务</p> <p>..........</p> <blockquote><p>网站</p></blockquote> <p>中文官网：https://www.redis.net.cn/</p> <p>官网：https://redis.io/</p> <p>安装：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://packages.redis.io/gpg <span class="token operator">|</span> <span class="token function">sudo</span> gpg <span class="token parameter variable">--dearmor</span> <span class="token parameter variable">-o</span> /usr/share/keyrings/redis-archive-keyring.gpg

<span class="token builtin class-name">echo</span> <span class="token string">&quot;deb [signed-by=/usr/share/keyrings/redis-archive-keyring.gpg] https://packages.redis.io/deb <span class="token variable"><span class="token variable">$(</span>lsb_release <span class="token parameter variable">-cs</span><span class="token variable">)</span></span> main&quot;</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/redis.list

<span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> redis
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>启动： redis-server
		redies-cli <span class="token parameter variable">-p</span> 端口号
关闭   <span class="token function">shutdown</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>性能测试</p> <p><img src="C:%5CUsers%5Cqjj%5CDesktop%5C%E5%AD%A6%E4%B9%A0%5CRedis.assets%5Cimage-20220508004955425.png" alt="image-20220508004955425"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>测试：100个
redis-benchmark <span class="token parameter variable">-h</span> localhost <span class="token parameter variable">-p</span> <span class="token number">6379</span> <span class="token parameter variable">-c</span> <span class="token number">100</span> <span class="token parameter variable">-n</span> <span class="token number">100000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>ps -ef当前系统所有进程
ps -ef | grep xxxx 查看具体进程
kill -9 32 杀死32号进程（具体更多参数kill -l）
pkill -9 -u kaen 杀死kaen用户的所有进程，被强制退出
killall -a -9 sendmail 杀死sendmail全部进程
jobs 显示后台任务
fg 靠前任务切换到前台
fg n 第n号任务切换到前台
Ctrl +z 暂停正在执行任务并切换到后台
bg 后台执行最靠前的任务
bg n
nohup oder1&amp;oder2…
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h1 id="五大数据类型"><a href="#五大数据类型" class="header-anchor">#</a> 五大数据类型</h1> <h2 id="redis-key"><a href="#redis-key" class="header-anchor">#</a> Redis-key</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> name <span class="token builtin class-name">test</span>  <span class="token comment">#设置键值</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *  <span class="token comment">#查看全部键</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;key:__rand_int__&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;mylist&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;key&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;counter:__rand_int__&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;myhash&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXISTS name  <span class="token comment">#判断是否存在</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXPIRE name <span class="token number">10</span>  <span class="token comment">#设置过期时间</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">7</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">5</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token parameter variable">-2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get neame
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">type</span> name <span class="token comment">#键类型</span>
string

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="string"><a href="#string" class="header-anchor">#</a> String</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> APPEND name <span class="token string">&quot;hello&quot;</span>  <span class="token comment">#追加字符串，不存在，则增加</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">9</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get name
<span class="token string">&quot;testhello&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> strlen name <span class="token comment">#获取字符串长度</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">9</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 
<span class="token comment">##########################################################</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> views <span class="token number">0</span> <span class="token comment">#初始浏览量 0</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get views
<span class="token string">&quot;0&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incr views  <span class="token comment">#自加1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incr views
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get views
<span class="token string">&quot;2&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> decr views <span class="token comment">#自减1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incrby views <span class="token number">10</span> <span class="token comment">#设置步长，指定增加量</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">11</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> decrby views <span class="token number">5</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 
<span class="token comment">#########################################################</span>
<span class="token comment">#字符串范围  GETRANGE</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> key1 <span class="token string">&quot;helloworld&quot;</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> GETRANGE key1 <span class="token number">0</span> <span class="token number">3</span>   <span class="token comment">#[0,3]</span>
<span class="token string">&quot;hell&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> GETRANGE key1 <span class="token number">0</span> <span class="token parameter variable">-1</span>  <span class="token comment">#全部</span>
<span class="token string">&quot;helloworld&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 
<span class="token comment">#######################################################################</span>
<span class="token comment"># 替换</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SETRANGE key1 <span class="token number">1</span> xxx <span class="token comment">#从指定位置开始替换</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">10</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get key1
<span class="token string">&quot;hxxxoworld&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 
<span class="token comment">#########################################################</span>
<span class="token comment">#setex （set with expire)  #设置过期时间</span>
<span class="token comment">#setnc	(set if not exist) #不存在再设置(在分布式锁中会常常使用)</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setex key3 <span class="token number">30</span> <span class="token string">&quot;hello&quot;</span> <span class="token comment">#设置key3 值为hello 30 秒过期</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl key3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">24</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get key3
<span class="token string">&quot;hello&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setnx mykey4 <span class="token string">&quot;redis&quot;</span> <span class="token comment">#如果mukey4不存在，创建成功</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get mykey4
<span class="token string">&quot;redis&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setnx mykey4 <span class="token string">&quot;newredis&quot;</span> <span class="token comment">#如果mukey4存在，创建失败</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get mykey4
<span class="token string">&quot;redis&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 
<span class="token comment">#########################################</span>
mset
mget
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> mset k1 v1 k2 v2 k3 v3 <span class="token comment">#同时设置多个值</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> mget k1 k2 k3 <span class="token comment">#同时获取多个值</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;v1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;v2&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;v3&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> msetnx k1 v1 k4 v4  <span class="token comment">#msetnx 是一个原子性操纵</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 

<span class="token comment">#对象</span>
<span class="token builtin class-name">set</span> user:1<span class="token punctuation">{</span>name:zhangsan,age:3<span class="token punctuation">}</span> <span class="token comment">#设置一个user:1 对象，值为JSON字符保存一个对象</span>

<span class="token comment">#这里的 key 是一个巧妙的设计 : user:{id}:{filed}</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> mset user:1:name zhangsan user:1:age <span class="token number">21</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> mget user:1:name user:1:age
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;zhangsan&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;21&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 

<span class="token comment">###############################################################################</span>
getset <span class="token comment">#先get再set</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getset db redis <span class="token comment">#如果不存在，则返回nil</span>
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get db
<span class="token string">&quot;redis&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getset db mongodb <span class="token comment">#如果存在值，获取原来的值，再修改新的值</span>
<span class="token string">&quot;redis&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get db
<span class="token string">&quot;mongodb&quot;</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br></div></div><h2 id="list"><a href="#list" class="header-anchor">#</a> List</h2> <blockquote><p>在 Redis 里面，可以把 List 当成<strong>栈</strong>、<strong>队列</strong>、<strong>阻塞队列</strong>使用。</p> <p>list 实际是一个链表，左右都可以插入值。</p> <p>如果 key 不存在，创建新的链表。</p> <p>如果移除了所有元素，空链表也代表不存在。</p> <p>在两边插入或者改动值，效率最高；操作中间元素，效率相对低一些。</p> <p>应用场景：消息排队</p></blockquote> <h3 id="从左插入"><a href="#从左插入" class="header-anchor">#</a> 从左插入</h3> <blockquote><p>Lpush</p></blockquote> <p>将一个值或者多个值，插入列表的头部，即从左插入。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LPUSH list one <span class="token comment"># 从左插入一个值</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LPUSH list two three <span class="token comment"># 从左插入多个值</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LRANGE list <span class="token number">0</span> <span class="token parameter variable">-1</span> <span class="token comment"># -1 即表示查询所有元素</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LRANGE list <span class="token number">0</span> <span class="token number">1</span> <span class="token comment"># 查询指定下标范围元素</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>先进的排在后面，后进的排在前面。</p> <h3 id="从右插入"><a href="#从右插入" class="header-anchor">#</a> 从右插入</h3> <blockquote><p>Rpush</p></blockquote> <p>将一个值或者多个值，插入列表的尾部，即从右插入。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> RPUSH list four <span class="token comment"># 从右插入一个值</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> RPUSH list five six <span class="token comment"># 从右插入多个值</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LRANGE list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;four&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;five&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;six&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>先进的排在前面，后进的排在后面。</p> <h3 id="元素前后插入值"><a href="#元素前后插入值" class="header-anchor">#</a> 元素前后插入值</h3> <blockquote><p>Linsert</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LRANGE list1 <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LINSERT list1 before two three  <span class="token comment"># two 之前插入 three</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LRANGE list1 <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LINSERT list1 after two three  <span class="token comment"># two 之后插入 three</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> LRANGE list1 <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="指定下标赋值"><a href="#指定下标赋值" class="header-anchor">#</a> 指定下标赋值</h3> <blockquote><p>Lset</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lset list <span class="token number">0</span> one <span class="token comment"># 赋值列表指定下标元素</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如果列表不存在或者列表指定下标不存在，赋值失败。</p> <h3 id="取值"><a href="#取值" class="header-anchor">#</a> 取值</h3> <h3 id="查看列表"><a href="#查看列表" class="header-anchor">#</a> 查看列表</h3> <blockquote><p>Lrange</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span> <span class="token comment"># -1 即表示查询所有元素</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrange list <span class="token number">0</span> <span class="token number">1</span> <span class="token comment"># 查询指定下标范围元素</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="下标获取元素"><a href="#下标获取元素" class="header-anchor">#</a> 下标获取元素</h3> <blockquote><p>Lindex</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lindex list <span class="token number">0</span> <span class="token comment"># 下标从 0 开始</span>
<span class="token string">&quot;two&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lindex list <span class="token number">1</span>
<span class="token string">&quot;one&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Redis 显示的下标是从 1 开始的，实际的下标还是从 0 开始的。</p> <h3 id="列表长度"><a href="#列表长度" class="header-anchor">#</a> 列表长度</h3> <blockquote><p>Llen</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Llen list
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="列表是否存在"><a href="#列表是否存在" class="header-anchor">#</a> 列表是否存在</h3> <blockquote><p>exists</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> exists list
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> exists list3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="删除"><a href="#删除" class="header-anchor">#</a> 删除</h3> <h3 id="从左移除"><a href="#从左移除" class="header-anchor">#</a> 从左移除</h3> <blockquote><p>Lpop</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;four&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lpop list <span class="token comment"># 移除最左边的元素</span>
<span class="token string">&quot;three&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;four&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="从右移除"><a href="#从右移除" class="header-anchor">#</a> 从右移除</h3> <blockquote><p>Rpop</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;four&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Rpop list <span class="token comment"># 移除最右边的元素</span>
<span class="token string">&quot;four&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="移除元素"><a href="#移除元素" class="header-anchor">#</a> 移除元素</h3> <blockquote><p>Lrem</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrem list <span class="token number">1</span> one <span class="token comment"># 移除一个指定元素</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrem list <span class="token number">2</span> three <span class="token comment"># 移除两个指定元素</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="截取"><a href="#截取" class="header-anchor">#</a> 截取</h3> <h3 id="截取下标范围的元素"><a href="#截取下标范围的元素" class="header-anchor">#</a> 截取下标范围的元素</h3> <blockquote><p>Ltrim</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;four&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Ltrim list <span class="token number">1</span> <span class="token number">2</span> <span class="token comment"># 截取下标 1 到 2 的元素</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="移动"><a href="#移动" class="header-anchor">#</a> 移动</h3> <h3 id="移除列表最后一个元素并移动到新列表中"><a href="#移除列表最后一个元素并移动到新列表中" class="header-anchor">#</a> 移除列表最后一个元素并移动到新列表中</h3> <blockquote><p>Rpoplpush</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Rpoplpush list list2 <span class="token comment"># 移除列表最后一个元素并移动到新列表中</span>
<span class="token string">&quot;three&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span> <span class="token comment"># 原来的列表</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Lrange list2 <span class="token number">0</span> <span class="token parameter variable">-1</span> <span class="token comment"># 新的列表</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="set"><a href="#set" class="header-anchor">#</a> Set</h2> <blockquote><p>Set 中的值是不能重复的</p> <p>应用场景：共同关注</p></blockquote> <h3 id="赋值"><a href="#赋值" class="header-anchor">#</a> 赋值</h3> <h3 id="插入值"><a href="#插入值" class="header-anchor">#</a> 插入值</h3> <blockquote><p>Sadd (key1 value1)</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Sadd <span class="token builtin class-name">set</span> hello
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Sadd <span class="token builtin class-name">set</span> world
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> 
<span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Sadd <span class="token builtin class-name">set</span> world <span class="token comment"># 插入了重复值，没有生效</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Smembers <span class="token builtin class-name">set</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="取值-2"><a href="#取值-2" class="header-anchor">#</a> 取值</h3> <h3 id="所有元素"><a href="#所有元素" class="header-anchor">#</a> 所有元素</h3> <blockquote><p>Smembers</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Smembers <span class="token builtin class-name">set</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="元素是否存在"><a href="#元素是否存在" class="header-anchor">#</a> 元素是否存在</h3> <blockquote><p>Sismember</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Smembers <span class="token builtin class-name">set</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Sismember <span class="token builtin class-name">set</span> hello <span class="token comment"># 存在返回 1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Sismember <span class="token builtin class-name">set</span> hello1 <span class="token comment"># 不存在返回 0</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="元素个数"><a href="#元素个数" class="header-anchor">#</a> 元素个数</h3> <blockquote><p>Scard</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Scard <span class="token builtin class-name">set</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="取随机元素"><a href="#取随机元素" class="header-anchor">#</a> 取随机元素</h3> <blockquote><p>Srandmember</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; Smembers set
1) &quot;world&quot;
2) &quot;hello&quot;
127.0.0.1:6379&gt; Srandmember set
&quot;world&quot;
127.0.0.1:6379&gt; Srandmember set
&quot;hello&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="两个集合的差集"><a href="#两个集合的差集" class="header-anchor">#</a> 两个集合的差集</h3> <blockquote><p>Sdiff</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Smembers set1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;b&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;a&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Smembers set2
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;b&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;c&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Sdiff set1 set2 <span class="token comment"># 取 set1 对于 set2 的差集</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;a&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Sdiff set2 set1 <span class="token comment"># 取 set2 对于 set1 的差集</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;c&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="两个集合的交集"><a href="#两个集合的交集" class="header-anchor">#</a> 两个集合的交集</h3> <blockquote><p>Sinter</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Smembers set1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;b&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;a&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Smembers set2
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;b&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;c&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Sinter set1 set2 <span class="token comment"># 取 set1 和 set2 的交集</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;b&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>可以用来获取<strong>共同关注</strong>。</p> <h3 id="两个集合的并集"><a href="#两个集合的并集" class="header-anchor">#</a> 两个集合的并集</h3> <blockquote><p>Sunion</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>127.0.0.1:6379&gt; Smembers set1
1) &quot;b&quot;
2) &quot;a&quot;
127.0.0.1:6379&gt; Smembers set2
1) &quot;b&quot;
2) &quot;c&quot;
127.0.0.1:6379&gt; Sunion set1 set2
1) &quot;b&quot;
2) &quot;c&quot;
3) &quot;a&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="删除-2"><a href="#删除-2" class="header-anchor">#</a> 删除</h3> <h3 id="指定元素"><a href="#指定元素" class="header-anchor">#</a> 指定元素</h3> <blockquote><p>Srem</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Srem <span class="token builtin class-name">set</span> world
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Smembers set1<span class="token punctuation">)</span> 
<span class="token string">&quot;hello&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="随机元素"><a href="#随机元素" class="header-anchor">#</a> 随机元素</h3> <blockquote><p>Spop</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Smembers <span class="token builtin class-name">set</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Spop <span class="token builtin class-name">set</span>
<span class="token string">&quot;world&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="移动-2"><a href="#移动-2" class="header-anchor">#</a> 移动</h3> <h3 id="指定元素到其他集合"><a href="#指定元素到其他集合" class="header-anchor">#</a> 指定元素到其他集合</h3> <blockquote><p>Smove</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Smembers <span class="token builtin class-name">set</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Smove <span class="token builtin class-name">set</span> set1 hello <span class="token comment"># 移动 set 中的 hello 到 set1 中（set1 是存在的）</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Smembers set1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Smembers set<span class="token punctuation">(</span>empty array<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Smove set1 set2 hello <span class="token comment"># 移动 set1 中的 hello 到 set2 中（set2 不存在则创建）</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Smembers set21<span class="token punctuation">)</span> 
<span class="token string">&quot;hello&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="hash"><a href="#hash" class="header-anchor">#</a> Hash</h2> <blockquote><p>哈希就是 key - map 的数据结构</p> <p>应用场景：对象存储</p></blockquote> <h3 id="赋值-2"><a href="#赋值-2" class="header-anchor">#</a> 赋值</h3> <h3 id="单个哈希"><a href="#单个哈希" class="header-anchor">#</a> 单个哈希</h3> <blockquote><p>Hset</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hset <span class="token builtin class-name">hash</span> f1 sail
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="多个哈希"><a href="#多个哈希" class="header-anchor">#</a> 多个哈希</h3> <blockquote><p>Hmset</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> HSET <span class="token builtin class-name">hash</span> f2 sail2 f3 sail3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="不存在才赋值"><a href="#不存在才赋值" class="header-anchor">#</a> 不存在才赋值</h3> <blockquote><p>Hsetnx</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hkeys <span class="token builtin class-name">hash</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;f1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;f2&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;f3&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hsetnx <span class="token builtin class-name">hash</span> f4 <span class="token number">1</span> <span class="token comment"># f4 不存在，赋值成功</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hget <span class="token builtin class-name">hash</span> f4
<span class="token string">&quot;1&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hsetnx <span class="token builtin class-name">hash</span> f4 <span class="token number">2</span> <span class="token comment"># f4 存在，赋值失败</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hget <span class="token builtin class-name">hash</span> f4
<span class="token string">&quot;1&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="自增"><a href="#自增" class="header-anchor">#</a> 自增</h3> <blockquote><p>Hincrby</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hset <span class="token builtin class-name">hash</span> f3 <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hincrby <span class="token builtin class-name">hash</span> f3 <span class="token number">1</span> <span class="token comment"># 自增 1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hincrby <span class="token builtin class-name">hash</span> f3 <span class="token parameter variable">-1</span> <span class="token comment"># 自减 1（哈希没有自减命令，用自增负数实现自减）</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="取值-3"><a href="#取值-3" class="header-anchor">#</a> 取值</h3> <h3 id="单个哈希-2"><a href="#单个哈希-2" class="header-anchor">#</a> 单个哈希</h3> <blockquote><p>Hget</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hget <span class="token builtin class-name">hash</span> f1
<span class="token string">&quot;sail&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="多个哈希-2"><a href="#多个哈希-2" class="header-anchor">#</a> 多个哈希</h3> <blockquote><p>Hmget</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hmget <span class="token builtin class-name">hash</span> f2 f3
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;sail2&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;sail3&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="所有值"><a href="#所有值" class="header-anchor">#</a> 所有值</h3> <blockquote><p>Hgetall</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hgetall <span class="token builtin class-name">hash</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;f1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;sail&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;f2&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;sail2&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;f3&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;sail3&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="所有-key"><a href="#所有-key" class="header-anchor">#</a> 所有 key</h3> <blockquote><p>Hkeys</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hkeys <span class="token builtin class-name">hash</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;f1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;f2&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="所有-value"><a href="#所有-value" class="header-anchor">#</a> 所有 value</h3> <blockquote><p>Hvals</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hvals <span class="token builtin class-name">hash</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;sail&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;sail2&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="长度"><a href="#长度" class="header-anchor">#</a> 长度</h3> <blockquote><p>Hlen</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hgetall <span class="token builtin class-name">hash</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;f1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;sail&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;f2&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;sail2&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hlen <span class="token builtin class-name">hash</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="字段是否存在"><a href="#字段是否存在" class="header-anchor">#</a> 字段是否存在</h3> <blockquote><p>Hexists</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hgetall <span class="token builtin class-name">hash</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;f1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;sail&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;f2&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;sail2&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hexists <span class="token builtin class-name">hash</span> f1 <span class="token comment"># 存在返回 1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hexists <span class="token builtin class-name">hash</span> f3 <span class="token comment"># 不存在返回 0</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="删除-3"><a href="#删除-3" class="header-anchor">#</a> 删除</h3> <h3 id="指定字段"><a href="#指定字段" class="header-anchor">#</a> 指定字段</h3> <blockquote><p>Hdel</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hdel <span class="token builtin class-name">hash</span> f3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Hgetall <span class="token builtin class-name">hash</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;f1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;sail&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;f2&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;sail2&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="zset"><a href="#zset" class="header-anchor">#</a> Zset</h2> <blockquote><p>Zset 就是 Set 的有序集合</p> <p>应用场景：排行榜</p></blockquote> <h3 id="赋值-3"><a href="#赋值-3" class="header-anchor">#</a> 赋值</h3> <h3 id="一个或多个元素"><a href="#一个或多个元素" class="header-anchor">#</a> 一个或多个元素</h3> <blockquote><p>Zadd   ( key1 score1 value1)</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Zadd zset <span class="token number">1</span> one
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Zadd zset <span class="token number">2</span> two <span class="token number">3</span> three
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="取值-4"><a href="#取值-4" class="header-anchor">#</a> 取值</h3> <h3 id="正序查询指定下标范围"><a href="#正序查询指定下标范围" class="header-anchor">#</a> 正序查询指定下标范围</h3> <blockquote><p>Zrange</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Zrange zset <span class="token number">0</span> <span class="token number">1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Zrange zset <span class="token number">0</span> <span class="token parameter variable">-1</span> <span class="token comment"># 0 -1 即为查询所有的元素</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="倒序查询指定下标范围"><a href="#倒序查询指定下标范围" class="header-anchor">#</a> 倒序查询指定下标范围</h3> <blockquote><p>Zrevrange</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Zrevrange zset <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="元素个数-2"><a href="#元素个数-2" class="header-anchor">#</a> 元素个数</h3> <blockquote><p>Zcard</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Zrange zset <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Zcard zset
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="指定区间元素数量"><a href="#指定区间元素数量" class="header-anchor">#</a> 指定区间元素数量</h3> <blockquote><p>Zcount</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Zrange zset <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Zcount zset <span class="token number">1</span> <span class="token number">3</span> <span class="token comment"># 这里下标从 1 开始</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Zcount zset <span class="token number">1</span> <span class="token number">2</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="排序"><a href="#排序" class="header-anchor">#</a> 排序</h3> <h3 id="正序"><a href="#正序" class="header-anchor">#</a> 正序</h3> <blockquote><p>Zrangebyscore</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Zrangebyscore zset <span class="token parameter variable">-inf</span> +inf <span class="token comment"># 负无穷到正无穷正序排列</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Zrangebyscore zset <span class="token parameter variable">-inf</span> <span class="token number">2</span> <span class="token comment"># 负无穷到 2 排序</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Zrangebyscore zset <span class="token parameter variable">-inf</span> <span class="token number">2</span> limit <span class="token number">0</span> <span class="token number">1</span> <span class="token comment"># 排序结果只取 0 到 1 条</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Zrangebyscore zset <span class="token parameter variable">-inf</span> +inf withscores <span class="token comment"># 排序结果带上分数</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;3&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="倒序"><a href="#倒序" class="header-anchor">#</a> 倒序</h3> <blockquote><p>Zrevrangebyscore</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Zrevrangebyscore zset +inf <span class="token parameter variable">-inf</span> <span class="token comment"># 正无穷到负无穷倒序排列</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="删除-4"><a href="#删除-4" class="header-anchor">#</a> 删除</h3> <h3 id="指定元素-2"><a href="#指定元素-2" class="header-anchor">#</a> 指定元素</h3> <blockquote><p>Zrem</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Zrange zset <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Zrem zset three <span class="token comment"># 移除指定元素</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> Zrange zset <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>RedisTemplate 使用的  lettuce 客户端库</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--redis起步依赖： 直接在项目中使用RedisTemplate(StringRedisTemplate)--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
data-redis使用的   lettuce 客户端库

在程序中使用RedisTemplate类的方法 操作redis数据， 实际就是调用的lettuce 客户端的中的方法
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>springboot 集成 Redis</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">#指定redis （host ，ip， password）</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> 192.168.245.131
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
<span class="token comment">#spring.redis.password=123</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img src="Redis.assets/image-20220810173501712.png" alt="image-20220810173501712"></p> <h1 id="常用"><a href="#常用" class="header-anchor">#</a> 常用</h1> <h2 id="常用string"><a href="#常用string" class="header-anchor">#</a> 常用String</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">1</span> 设置值 获取值
<span class="token builtin class-name">set</span> key value
get key

<span class="token number">2</span> mset mget 一次性操作多组
mset key1 value1 key2 value2
mget key1 key2

<span class="token number">3</span> 没有这个键我们才设置
setnx key value

<span class="token number">4</span> key的长度
strlen key

<span class="token number">5</span> 将key的值加一操作  减一操作  <span class="token comment">#业务举例  商城商品的售出 如下图</span>
incr stock
incrby stock <span class="token number">10</span> <span class="token comment">#设置步长，指定增加量</span>

decr stock
decrby stock <span class="token number">10</span> <span class="token comment">#设置步长，指定增加量</span>

<span class="token number">6</span> 设置key的值存货时间5秒，值为value   <span class="token comment">#业务举例  手机验证码  超时设置</span>
setex key second value
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><img src="Redis.assets/image-20220810180345540.png" alt="image-20220810180345540"></p> <h2 id="常用hash"><a href="#常用hash" class="header-anchor">#</a> 常用Hash</h2> <p><img src="Redis.assets/image-20220810181147154.png" alt="image-20220810181147154"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">1</span>、设置值 获取值
	hset key<span class="token punctuation">(</span>键<span class="token punctuation">)</span> field<span class="token punctuation">(</span>字段、小key<span class="token punctuation">)</span> value<span class="token punctuation">(</span>值<span class="token punctuation">)</span>

hset user username zhangsan
hset user age <span class="token number">18</span>
hget user username

<span class="token number">2</span>、批量
hmset user1 username zhangsan age <span class="token number">19</span> 

<span class="token number">3</span>、获取所有的键值对
hgetall user
<span class="token number">192.168</span>.245.131:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hgetall user
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;username&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;zhangsan&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;18&quot;</span>



<span class="token number">4</span>、获取所有小key
hkeys  user
<span class="token number">192.168</span>.245.131:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hkeys user
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;username&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span>



<span class="token number">5</span>、获取所有值
HVALS user
<span class="token number">192.168</span>.245.131:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hvals user
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;zhangsan&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;18&quot;</span>



<span class="token number">6</span>、删除 
hdel user age

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h2 id="常用list"><a href="#常用list" class="header-anchor">#</a> 常用List</h2> <p>Redis列表是简单的字符串列表，按照插入<strong>顺序</strong>排序。你可以添加一个元素到列表的头部（左边）或者尾部（右边）</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">1</span> 设置值
lpush list1 <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">1</span>
rpush list1 <span class="token number">6</span>

<span class="token number">2</span>查看数据
lrange list1 <span class="token number">0</span> <span class="token parameter variable">-1</span>  取值为<span class="token punctuation">[</span>a,b<span class="token punctuation">]</span>

<span class="token number">3</span> 移除数据
lpop list1
rpop list1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="Redis.assets/image-20220810200320407.png" alt="image-20220810200320407"></p> <h2 id="常用set"><a href="#常用set" class="header-anchor">#</a> 常用Set</h2> <ul><li><p>Redis 的 Set 是 String 类型的<strong>无序</strong>集合。集合成员是<strong>唯一</strong>的，这就意味着集合中不能出现重复的数据</p></li> <li><p>Redis 中集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是 O(1)。</p></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">1</span>添加数据
sadd set1 <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span>

<span class="token number">2</span>获取数据
smembers set1

<span class="token number">3</span>获取成员数量
scard set1

<span class="token number">4</span>业务 uv 当天登陆用户数
sadd uv:20220222 001 002 003 002
scard uv:20220222
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="常用key的操作"><a href="#常用key的操作" class="header-anchor">#</a> 常用Key的操作</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">1</span>删除
del key

<span class="token number">2</span>查看所有的key  
keys *     生产环境下，别用

<span class="token number">3</span>存在key
exists key

<span class="token number">4</span>存活时间 为给定 key 设置过期时间，以秒计。
expire key seconds

<span class="token number">5</span>剩余存活时间   以毫秒为单位返回 key 的剩余的过期时间。 登陆续期
pttl key
ttl key 	以秒为单位返回 key 的剩余的过期时间

<span class="token number">6</span>随机获取 key  从当前数据库中随机返回一个 key
randomkey
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="对zset的操作-重要-热搜"><a href="#对zset的操作-重要-热搜" class="header-anchor">#</a> 对ZSet的操作-重要（热搜）</h2> <ul><li>Redis有序集合和集合一样也是string类型元素的集合,且不允许重复的成员</li> <li>它用来保存需要排序的数据，例如排行榜，一个班的语文成绩，一个公司的员工工资，一个论坛的帖子等。</li> <li>有序集合中，每个元素都带有score（权重），以此来对元素进行排序</li> <li>它有三个元素：key、member和score。以语文成绩为例，key是考试名称（期中考试、期末考试等），member是学生名字，score是成绩。
<ul><li>互联网，微博热搜，最热新闻，统计网站pv(pageview 网页)</li></ul></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">1</span>添加
zadd key score<span class="token punctuation">(</span>权重<span class="token punctuation">)</span> member
zadd <span class="token function">pv</span> <span class="token number">100</span> page1.html <span class="token number">200</span> page2.html <span class="token number">300</span> page3.html

<span class="token number">2</span>获取有序集合的成员数
zcard <span class="token function">pv</span>

<span class="token number">3</span>查询指定权重范围的成员数    取值<span class="token punctuation">[</span>min max<span class="token punctuation">]</span>
ZCOUNT key min max 计算在有序集合中指定区间分数的成员数
ZCOUNT <span class="token function">pv</span> <span class="token number">150</span> <span class="token number">500</span>

<span class="token number">4</span>增加权重 为zset中成员增加权重
ZINCRBY <span class="token function">pv</span> <span class="token number">1</span> page1.html

<span class="token number">5</span>交集
ZINTERSTORE destination <span class="token string">'numkeys'</span> key <span class="token punctuation">[</span>key <span class="token punctuation">..</span>.<span class="token punctuation">]</span> 计算给定的一个或多个有序集的交集并将结果集存储在新的有序集合 key 中
ZADD pv_zset1 <span class="token number">10</span> page1.html <span class="token number">20</span>  page2.html
ZADD pv_zset2 <span class="token number">5</span> page1.html <span class="token number">10</span>  page2.html
ZINTERSTORE pv_zset_result <span class="token number">2</span> pv_zset1  pv_zset2



<span class="token number">6</span>成员的分数值
ZSCORE pv_zset page3.html   

<span class="token number">7</span> 获取下标范围内的成员。 排序，默认权重由低到高
ZRANGE <span class="token function">pv</span> <span class="token number">0</span> <span class="token parameter variable">-1</span>

<span class="token number">8</span><span class="token string">'反转  获取'</span>获取由高到低的几个成员（reverse）使用最多的
效率很高，因为本身zset就是排好序的。
ZREVRANGE key start stop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="对位图bitmaps的操作"><a href="#对位图bitmaps的操作" class="header-anchor">#</a> 对位图BitMaps的操作</h2> <ul><li><p>计算机最小的存储单位是位bit，Bitmaps是针对位的操作的，相较于String、Hash、Set等存储方式更加节省空间</p></li> <li><p>Bitmaps不是一种数据结构，操作是基于String结构的，一个String最大可以存储512M，那么一个Bitmaps则可以设置2^32个位</p></li> <li><p>Bitmaps单独提供了一套命令，所以在Redis中使用Bitmaps和使用字符串的方法不太相同。可以<strong>把Bitmaps想象成一个以位为单位的数组</strong>，数组的每个单元<strong>只能存储0和1</strong>，数组的下标在Bitmaps中叫做偏移量offset</p> <p><img src="Redis.assets/image-20220222170630408.855a0075.png" alt="image-20220222170630408"></p></li> <li><p>BitMaps 命令说明：<strong>将每个独立用户是否访问过网站存放在Bitmaps中， 将访问的用户记做1， 没有访问的用户记做0， 用偏移量作为用户的id</strong> 。</p> <p>unique:users:2022-04-05 0 1 0 0</p></li></ul> <h4 id="_7-1-设置值"><a href="#_7-1-设置值" class="header-anchor">#</a> <a href="https://www.ydlclass.com/doc21xnv/frame/redis/#_7-1-%E8%AE%BE%E7%BD%AE%E5%80%BC" target="_blank" rel="noopener noreferrer">#<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>7.1 设置值</h4> <div class="language-text line-numbers-mode"><pre class="language-text"><code>SETBIT key offset(位移) value  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>setbit</strong>命令设置的vlaue只能是<strong>0</strong>或<strong>1</strong>两个值</p> <ul><li><p>设置键的第offset个位的值（从0算起），假设现在有20个用户，<strong>uid=0，5，11，15，19</strong>的用户对网站进行了访问， 那么当前Bitmaps初始化结果如图所示</p> <p><img src="Redis.assets/image-20220222171326788.424b1aed.png" alt="image-20220222171326788"></p></li> <li><p>具体操作过程如下， <strong>unique:users:2022-04-05</strong>代表2022-04-05这天的独立访问用户的Bitmaps</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code> setbit unique:users:2022-04-05 0  1  
 setbit unique:users:2022-04-05 5 1  
 setbit unique:users:2022-04-05 11 1  
 setbit unique:users:2022-04-05 15 1  
 setbit unique:users:2022-04-05 19 1 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>很多应用的用户id以一个指定数字（例如10000） 开头， 直接将用户id和Bitmaps的偏移量对应势必会造成一定的浪费， 通常的做法是每次做setbit操作时将用户id减去这个指定数字。</p> <p>10000000 10000005 10000011</p></li> <li><p>在第一次初始化Bitmaps时， 假如偏移量非常大， 那么整个初始化过程执行会比较慢， 可能会造成Redis的阻塞。</p></li></ul> <h4 id="_7-2-获取值"><a href="#_7-2-获取值" class="header-anchor">#</a> <a href="https://www.ydlclass.com/doc21xnv/frame/redis/#_7-2-%E8%8E%B7%E5%8F%96%E5%80%BC" target="_blank" rel="noopener noreferrer">#<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>7.2 获取值</h4> <div class="language-text line-numbers-mode"><pre class="language-text"><code>GETBIT key offset
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>获取键的第offset位的值（从0开始算），例：下面操作获取id=8的用户是否在2022-04-05这天访问过， 返回0说明没有访问过。</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>getbit unique:users:2022-04-05 8
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="Redis.assets/image-20220222171409985.ce0a3e4b.png" alt="image-20220222171409985"></p> <h4 id="_7-3-获取bitmaps指定范围值为1的个数"><a href="#_7-3-获取bitmaps指定范围值为1的个数" class="header-anchor">#</a> <a href="https://www.ydlclass.com/doc21xnv/frame/redis/#_7-3-%E8%8E%B7%E5%8F%96bitmaps%E6%8C%87%E5%AE%9A%E8%8C%83%E5%9B%B4%E5%80%BC%E4%B8%BA1%E7%9A%84%E4%B8%AA%E6%95%B0" target="_blank" rel="noopener noreferrer">#<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>7.3 获取Bitmaps指定范围值为1的个数</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>BITCOUNT key <span class="token punctuation">[</span>start end<span class="token punctuation">]</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例：下面操作计算2022-04-05这天的独立访问用户数量：</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>bitcount unique:users:2022-04-05  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="Redis.assets/image-20220222171507374.103ab048.png" alt="image-20220222171507374"></p> <h4 id="_7-4-bitmaps间的运算"><a href="#_7-4-bitmaps间的运算" class="header-anchor">#</a> <a href="https://www.ydlclass.com/doc21xnv/frame/redis/#_7-4-bitmaps%E9%97%B4%E7%9A%84%E8%BF%90%E7%AE%97" target="_blank" rel="noopener noreferrer">#<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>7.4 Bitmaps间的运算</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>BITOP operation<span class="token punctuation">(</span>操作名<span class="token punctuation">)</span> destkey<span class="token punctuation">(</span>新键<span class="token punctuation">)</span> key <span class="token punctuation">[</span>key, …<span class="token punctuation">]</span> 


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>bitop是一个<strong>复合操作</strong>， 它可以做多个Bitmaps的and（交集） 、 or（并集） 、 not（非） 、 xor（异或） 操作并将结果保存在destkey中。</p> <p>需求：假设2022-04-04访问网站的userid=1， 2， 5， 9， 如图3-13所示：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>setbit unique:users:2022-04-04 <span class="token number">1</span> <span class="token number">1</span>  
setbit  unique:users:2022-04-04 <span class="token number">2</span> <span class="token number">1</span>  
setbit  unique:users:2022-04-04 <span class="token number">5</span> <span class="token number">1</span>  
setbit  unique:users:2022-04-04 <span class="token number">9</span> <span class="token number">1</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>例1：下面操作计算出2022-04-04和2022-04-05两天都访问过网站的用户数量， 如下所示。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>bitop and unique:users:and:2022-04-04_05  unique:users:2022-04-04 unique:users:2022-04-05  
bitcount unique:users:and:2022-04-04_05
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="Redis.assets/image-20220222172009994.8449f625.png" alt="image-20220222172009994"></p> <p>例2：如果想算出2022-04-04和2022-04-05任意一天都访问过网站的用户数量（例如月活跃就是类似这种） ， 可以使用or求并集， 具体命令如下：</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code> bitop or unique:users:or:2022-04-04_05  unique:users:2022-04-04 unique:users:2022-04-05  
 bitcount unique:users:or:2022-04-04_05
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="Redis.assets/image-20220222172134891.231c6e16.png" alt="image-20220222172134891"></p> <h2 id="_8、对hyperloglog结构的操作"><a href="#_8、对hyperloglog结构的操作" class="header-anchor">#</a> <a href="https://www.ydlclass.com/doc21xnv/frame/redis/#_8%E3%80%81%E5%AF%B9hyperloglog%E7%BB%93%E6%9E%84%E7%9A%84%E6%93%8D%E4%BD%9C" target="_blank" rel="noopener noreferrer">#<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>8、对HyperLogLog结构的操作</h2> <h4 id="_8-1-应用场景"><a href="#_8-1-应用场景" class="header-anchor">#</a> <a href="https://www.ydlclass.com/doc21xnv/frame/redis/#_8-1-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" target="_blank" rel="noopener noreferrer">#<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>8.1 应用场景</h4> <p>HyperLogLog常用于大数据量的统计，比如页面访问量统计或者用户访问量统计。</p> <p>要统计一个页面的访问量（PV），可以直接用redis计数器或者直接存数据库都可以实现，如果要统计一个页面的用户访问量（UV），一个用户一天内如果访问多次的话，也只能算一次，这样，我们可以使用SET集合来做，因为SET集合是<strong>有去重功能</strong>的，<strong>key存储页面对应的关键字，value存储对应的userid，这种方法是可行的</strong>。但如果访问量较多，假如有几千万的访问量，这就麻烦了。为了统计访问量，要频繁创建SET集合对象。</p> <p><img src="Redis.assets/image-20220222174354773.5ade9e1a.png" alt="image-20220222174354773"></p> <p>Redis实现HyperLogLog算法，HyperLogLog 这个数据结构的发明人 是Philippe Flajolet（菲利普·弗拉若莱）教授。Redis 在 2.8.9 版本添加了 HyperLogLog 结构。</p> <h4 id="_8-2-uv计算示例"><a href="#_8-2-uv计算示例" class="header-anchor">#</a> <a href="https://www.ydlclass.com/doc21xnv/frame/redis/#_8-2-uv%E8%AE%A1%E7%AE%97%E7%A4%BA%E4%BE%8B" target="_blank" rel="noopener noreferrer">#<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>8.2 UV计算示例</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>node1.ydlclass.cn:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">help</span> @hyperloglog      

增加：
PFADD  key element <span class="token punctuation">[</span>element <span class="token punctuation">..</span>.<span class="token punctuation">]</span>   
summary:  Adds the specified elements to the specified HyperLogLog.   
since:  <span class="token number">2.8</span>.9      

计数：
PFCOUNT  key <span class="token punctuation">[</span>key <span class="token punctuation">..</span>.<span class="token punctuation">]</span>   
summary:  Return the approximated cardinality（基数） of the set<span class="token punctuation">(</span>s<span class="token punctuation">)</span> observed by the HyperLogLog at  key<span class="token punctuation">(</span>s<span class="token punctuation">)</span>.   
since:  <span class="token number">2.8</span>.9      

合并：
PFMERGE  destkey sourcekey <span class="token punctuation">[</span>sourcekey <span class="token punctuation">..</span>.<span class="token punctuation">]</span>   
summary:  Merge N different HyperLogLogs into a single one.   
since:  <span class="token number">2.8</span>.9  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>Redis集成的HyperLogLog使用语法主要有pfadd和pfcount，顾名思义，一个是来添加数据，一个是来统计的。为什么用<strong>pf</strong>？是因为HyperLogLog 这个数据结构的发明人 是Philippe Flajolet教授 ，所以用发明人的英文缩写，这样容易记住这个语法了。</p> <p>下面我们通过一个示例，来演示如何计算uv。</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>node1.ydlclass.cn:6379&gt; pfadd uv user1  
(integer) 1  
node1.ydlclass.cn:6379&gt; keys *  
1) &quot;uv&quot;  
node1.ydlclass.cn:6379&gt; pfcount uv  
(integer) 1  
node1.ydlclass.cn:6379&gt; pfadd uv user2  
(integer) 1  
node1.ydlclass.cn:6379&gt; pfcount uv  
(integer) 2  
node1.ydlclass.cn:6379&gt; pfadd uv user3  
(integer) 1  
node1.ydlclass.cn:6379&gt; pfcount uv  
(integer) 3  
node1.ydlclass.cn:6379&gt; pfadd uv user4  
(integer) 1  
node1.ydlclass.cn:6379&gt; pfcount uv  
(integer) 4  
node1.ydlclass.cn:6379&gt; pfadd uv user5 user6  user7 user8 user9 user10  
(integer) 1  node1.ydlclass.cn:6379&gt; pfcount uv  
(integer) 10  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>HyperLogLog算法一开始就是为了大数据量的统计而发明的，所以很适合那种数据量很大，然后又没要求不能有一点误差的计算，HyperLogLog 提供不精确的去重计数方案，虽然不精确但是也不是非常不精确，标准误差是 0.81%，不过这对于页面用户访问量是没影响的，因为这种统计可能是访问量非常巨大，但是又没必要做到绝对准确，访问量对准确率要求没那么高，但是性能存储方面要求就比较高了，而HyperLogLog正好符合这种要求，不会占用太多存储空间，同时性能不错</p> <p><strong>pfadd</strong>和<strong>pfcount</strong>常用于统计，需求：假如两个页面很相近，现在想<strong>统计这两个页面的用户访问量</strong>呢？这里就可以用<strong>pfmerge</strong>合并统计了，语法如例子：</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>node1.ydlclass.cn:6379&gt; pfadd page1 user1 user2  user3 user4 user5  
(integer) 1  
node1.ydlclass.cn:6379&gt; pfadd page2 user1 user2  user3 user6 user7  
(integer) 1  
node1.ydlclass.cn:6379&gt; pfmerge page1+page2  page1 page2  
OK  
node1.ydlclass.cn:6379&gt; pfcount page1+page2  
(integer) 7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_8-3-hyperloglog为什么适合做大量数据的统计"><a href="#_8-3-hyperloglog为什么适合做大量数据的统计" class="header-anchor">#</a> <a href="https://www.ydlclass.com/doc21xnv/frame/redis/#_8-3-hyperloglog%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%82%E5%90%88%E5%81%9A%E5%A4%A7%E9%87%8F%E6%95%B0%E6%8D%AE%E7%9A%84%E7%BB%9F%E8%AE%A1" target="_blank" rel="noopener noreferrer">#<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>8.3 HyperLogLog为什么适合做大量数据的统计</h4> <ul><li>Redis HyperLogLog 是用来做基数统计的算法，HyperLogLog 的优点是，在输入元素的数量或者体积非常非常大时，计算基数所需的空间总是固定的、并且是很小的。</li> <li>在 Redis 里面，每个 HyperLogLog 键只需要花费 12 KB 内存，就可以计算接近 2^64 个不同元素的基数。这和计算基数时，元素越多耗费内存就越多的集合形成鲜明对比。</li> <li>但是，因为 HyperLogLog 只会根据输入元素来计算基数，而不会储存输入元素本身，所以 HyperLogLog 不能像集合那样，返回输入的各个元素。</li></ul> <p>什么是基数？</p> <p>比如：数据集{1, 3, 5, 7, 5, 7, 8}，那么这个数据集的基数集{1, 3, 5, 7, 8}，<strong>基数（不重复元素）为5</strong>。基数估计就是在误差可接受的范围内，快速计算基数。</p> <h1 id="redis进阶"><a href="#redis进阶" class="header-anchor">#</a> Redis进阶</h1> <p><strong>课程目标</strong>(面试、运维)</p> <ul><li><p>能够理解Redis的持久化</p></li> <li><p>能够理解Redis的主从复制架构</p></li> <li><p>能够理解Redis的Sentinel架构</p></li> <li><p>能够理解Redis cluster集群架构</p></li> <li><p>redis缓存常见面试题</p></li> <li><p>常见问题</p></li></ul> <h1 id="第一章-redis的持久化"><a href="#第一章-redis的持久化" class="header-anchor">#</a> 第一章 Redis的持久化</h1> <hr> <blockquote><p>reids.conf</p></blockquote> <div class="language-text line-numbers-mode"><pre class="language-text"><code>注释掉  使redis 可以外部访问
#bind 192.168.245.131

#no  守护线程fang'sh
protected-mode no


port 6379


tcp-backlog 511


timeout 0


tcp-keepalive 300



daemonize yes

pidfile /var/run/redis_6379.pid


loglevel notice

logfile &quot;/export/server/redis-stable/log/redis.log&quot; 




databases 16

proc-title-template &quot;{title} {listen-addr} {server-mode}&quot;

stop-writes-on-bgsave-error yes

rdbcompression yes


rdbchecksum yes


dbfilename dump.rdb


rdb-del-sync-files no


dir /export/server/redis-stable/data



replica-serve-stale-data yes

replica-read-only yes


repl-diskless-sync yes


repl-diskless-sync-delay 5


repl-diskless-sync-max-replicas 0


repl-diskless-load disabled


repl-disable-tcp-nodelay no



lazyfree-lazy-eviction no
lazyfree-lazy-expire no
lazyfree-lazy-server-del no
replica-lazy-flush no


lazyfree-lazy-user-del no


lazyfree-lazy-user-flush no


oom-score-adj no



oom-score-adj-values 0 200 800


disable-thp yes



appendonly no



appendfilename &quot;appendonly.aof&quot;



appenddirname &quot;appendonlydir&quot;




appendfsync everysec

no-appendfsync-on-rewrite no


auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb


aof-load-truncated yes


aof-use-rdb-preamble yes

aof-timestamp-enabled no


slowlog-log-slower-than 10000

slowlog-max-len 128

latency-monitor-threshold 0


notify-keyspace-events &quot;&quot;

hash-max-listpack-entries 512
hash-max-listpack-value 64


list-max-listpack-size -2


list-compress-depth 0

set-max-intset-entries 512

zset-max-listpack-entries 128
zset-max-listpack-value 64


hll-sparse-max-bytes 3000


stream-node-max-bytes 4096
stream-node-max-entries 100


activerehashing yes


client-output-buffer-limit normal 0 0 0
client-output-buffer-limit replica 256mb 64mb 60
client-output-buffer-limit pubsub 32mb 8mb 60


hz 10


dynamic-hz yes


aof-rewrite-incremental-fsync yes


rdb-save-incremental-fsync yes

jemalloc-bg-thread yes


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br></div></div></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/#/edit/master/docs/04.个人学习笔记/02.Redis/00.Redis.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/02/27, 14:46:51</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/ba54ad/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Docker</div></a> <a href="/pages/1aa945/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Redis-Docker</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/ba54ad/" class="prev">Docker</a></span> <span class="next"><a href="/pages/1aa945/">Redis-Docker</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/23dd8b/"><div>
            RabbitMqDemo
            <!----></div></a> <span class="date">09-12</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/dc92ff/"><div>
            ElasticsearchLinux下环境搭建
            <!----></div></a> <span class="date">09-12</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/ba54ad/"><div>
            Docker
            <!----></div></a> <span class="date">02-27</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2023
    <span>船到桥头沉 | <a href="https://github.com/NewStudyAccount/vblog/blob/main/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.87eabd22.js" defer></script><script src="/assets/js/2.3f274d60.js" defer></script><script src="/assets/js/33.07d8ec2a.js" defer></script>
  </body>
</html>
